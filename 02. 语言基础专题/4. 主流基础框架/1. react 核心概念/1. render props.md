# Render Props
在开发容器组件和内容组件的时候，经常会使用到 render props. 
用一句通俗的话讲就是: 
1.让容器组件中具备有多个插槽，可以允许外部注入自己的需要的内容，
2.并且可以将容器的状态传递给 内容组件。
最简单的写法如下：
```jsx
<Container>
    <div>content here</div>
</Container>
```
但是这种写法无法解决2个问题：
1. 容器组件的行为无法告知给内容组件。
2. 只有 children 一个插槽，无法像 vue 中 `slot-name` 一样放入多个插槽。 

关于第一个问题的解决方法，是将这个 children 写成一个函数，返回 react element。
```jsx
<Container>
    {(data) => (
        <div> content here </div>
    )}
</Container>
```
同时, Container 组件的内部实现，需要做一点改动。
```jsx
render() {
    const { children } = this.props;
    return (
        <div>
            ... // 容器的其他部分
            { children(this.state) }
        </div>
    )
}
```
使用 children 作为 render props 只适合容器只有一个插槽。
同时还需要注意一个问题, 在很多情况下要求 children 返回的元素必须有一个根节点。
以下是 react-motion 中的部分源码：
```tsx
render(): ReactElement {
    const hydratedStyles = rehydrateStyles(
        this.state.mergedPropsStyles,
        this.unreadPropStyles,
        this.state.currentStyles,
    );
    const renderedChildren = this.props.children(hydratedStyles);
    return renderedChildren && React.Children.only(renderedChildren);
}
```


对于多个插槽的情况，建议自己定义不同的 props 名称, 表达 render 含义。
```jsx
<Container
    renderHeader={(data) => <div>content header</div>}
    renderBottom={(data) => <div>content bottom</div>}
/>
```
这里的 data 到底是什么, 并不一定就是容器内部的state，它取决于 Container 内部的实现，建议使用 typescript 明确标注类型。

在使用 render props 时，还需要注意一个问题，如果 render 函数定义在 props 中，则每次 render 都会造成 PureComponent 的 props 更新，如果这一点造成性能问题，需要考虑将 render 函数抽离出来。

